function cancelModify(e){e.children[1].classList.add("vote"),e.children[1].hidden=!1,e.children[2].hidden=!1,e.children[3].hidden=!1;const t=["btn","btn-primary","btn-mini","btn-modify"];e.children[3].children[0].classList.add(t[0],t[1],t[2],t[3]),e.children[3].children[1].classList.add(t[0],t[1],t[2]),e.removeChild(e.children[4])}function addStarLabel(e,t,n){const d=document.createElement("label");return d.htmlFor="starM-"+e+"-"+n,d.appendChild(document.createTextNode(t+(1==e?" stella":" stelle"))),d}function addStarInput(e,t,n){const d=document.createElement("input");return d.type="radio",d.id="starM-"+e+"-"+n,d.name="rating",d.value=e,e==t&&(d.checked=!0),d}function modifyStars(e,t){const n=document.createElement("fieldset");n.classList.add("rating","row");const d=document.createElement("legend");d.innerText="Voto";const a=document.createElement("span");a.classList.add("stars");const i={1:"Una",2:"Due",3:"Tre",4:"Quattro",5:"Cinque"};for(let n=1;n<=5;n++)a.appendChild(addStarLabel(n,i[n],t)),a.appendChild(addStarInput(n,e,t)),a.appendChild(document.createElement("i"));return n.appendChild(d),n.appendChild(a),n}function createButton(e){const t=document.createElement(e);return t.classList.add("btn","btn-primary","col"),t}function addButtons(e){const t=document.createElement("div");t.classList.add("row");const n=createButton("input");n.type="submit",n.value="Modifica",t.appendChild(n);const d=createButton("button"),a=document.createTextNode("Annulla");return d.appendChild(a),d.addEventListener("click",(()=>cancelModify(e))),t.appendChild(d),t}function createTextareaLabel(e){const t=document.createElement("label");return t.innerText="Modifica la recensione",t.htmlFor="reviewM-"+e,t}function createTextarea(e,t){const n=document.createElement("textarea");return n.id="reviewM-"+t,n.name="review",n.rows=4,n.cols=80,n.textContent=e.children[2].innerText,n}function hideReview(e){e.children[3].children[1].removeAttribute("class"),e.children[3].children[0].removeAttribute("class"),e.children[3].children[1].hidden=!0,e.children[3].children[0].hidden=!0,e.children[3].hidden=!0,e.children[2].hidden=!0,e.children[1].removeAttribute("class"),e.children[1].hidden=!0}function enable_modify(e){const t=document.getElementsByClassName("modify").length,n=document.createElement("form");n.classList.add("medium","articled","solid","modify"),n.action="app/review.php",n.method="POST";const d=modifyStars(parseInt(e.dataset.stars),t);n.appendChild(d),n.appendChild(createTextareaLabel(t)),n.appendChild(createTextarea(e,t));const a=document.createElement("input");a.type="hidden",a.name="id_comm",a.value=e.dataset.id,n.appendChild(a);const i=document.createElement("input");i.type="hidden",i.name="id";const c=new URLSearchParams(window.location.search);i.value=c.get("id"),n.appendChild(i);const r=document.createElement("input");r.type="hidden",r.name="type",r.value=e.dataset.type,n.appendChild(r),n.appendChild(addButtons(e)),hideReview(e),e.appendChild(n)}const buttons=document.getElementsByClassName("btn-modify");Array.from(buttons).forEach((e=>{const t=e.parentNode.parentNode;e.addEventListener("click",(()=>enable_modify(t)))}));
